
{%- macro set_config(config, spacer, prefix='') -%}
{% for parameter in config | sort -%}
{% set value = config.get(parameter) -%}
{{ prefix }}{{ parameter }}{{ spacer }}{{ value }}
{% endfor -%}
{% endmacro -%}

{%- macro set_ignore(config, prefix='') -%}
{% for parameter in config | sort -%}
{{ prefix }}{{ parameter }}
{% endfor -%}
{% endmacro -%}


#
# **** DO NOT EDIT THIS FILE ****
# 
# This file is managed by Salt
#
# Unison preferences file

# Config
root = {{ root_local }}
root = {{ root_remote }}
sshargs = {{ sshargs }}

batch = {{ batch | lower }}
silent = {{ silent | lower }}
terse = {{ terse | lower }}
debug = {{ debug | lower }}
logfile = {{ logfile }}
perms = {{ perms | lower }}
dontchmod = {{ dontchmod | lower }}

{% if config_backup -%}
# Backup settings
{{ set_config(config_backup, ' = ') }}
{% else %}
# Use default backup settings
include _backup
{% endif -%}

{% if config_merge %}
# Merge settings
{{ set_config(config_merge, ' -> ', 'merge = Name *.') }}
{% else %}
# Use default merge settings
include _merge
{% endif -%}

{% if config_ignore %}
# Ignore settings
{{ set_ignore(config_ignore, 'ignore = Name ') }}
{% else %}
# Use default ignore settings
include _ignore
{% endif -%}

